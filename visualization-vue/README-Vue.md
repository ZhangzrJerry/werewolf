# 狼人杀智能体博弈 - Vue 可视化

## 概述

本项目是狼人杀智能体博弈的 Vue.js 可视化界面，已从原 Flask 应用迁移而来。提供完整的游戏回放、事件追踪和数据分析功能。

## 已完成的迁移

### ✅ 数据读取迁移

- **原始方案**: Flask 后端从 `.training` 目录读取数据
- **新方案**: Vue 前端直接从 `public/.training` 读取静态文件
- **数据复制**: `scripts/process-training-data.js` 自动将训练数据复制到 public 目录

### ✅ 核心功能迁移

1. **游戏列表**: 从 `progress.json` 加载可用游戏列表
2. **游戏回放**: 完整的事件回放系统（播放/暂停/跳转）
3. **玩家状态**: 实时更新玩家卡片（存活/死亡/角色显示）
4. **事件展示**: 格式化的游戏事件显示（讨论、投票、技能等）
5. **进度控制**: 可拖拽的进度条，支持跳转到任意事件
6. **全局概览**: 模态框显示游戏总结、玩家详情、时间线等

### ✅ UI/UX 改进

- 现代化的 Vue 3 组合式 API 实现
- 响应式设计，适配不同屏幕尺寸
- 流畅的动画和交互效果
- 改进的视觉设计和配色方案

## 文件结构

```
visualization-vue/
├── public/
│   └── .training/          # 训练数据（运行时复制）
│       ├── game_logs/      # 游戏日志文件
│       ├── progress/       # 进度数据
│       └── reviews/        # 复盘分析
├── scripts/
│   └── process-training-data.js  # 数据复制脚本
├── src/
│   ├── components/
│   │   └── GameViewer.vue        # 主游戏查看器组件
│   ├── services/
│   │   ├── gameLogParser.js      # 游戏日志解析器
│   │   └── trainingService.js    # 数据获取服务
│   ├── App.vue                   # 根组件
│   └── main.js                   # 入口文件
├── package.json                  # 依赖配置
└── vite.config.js               # Vite 配置
```

## 运行方式

### 开发环境

```bash
cd visualization-vue
npm install
npm run dev
```

访问: http://localhost:3000

### 构建生产版本

```bash
npm run build
```

### 数据准备

数据会在 `npm run dev` 时自动复制，也可手动运行：

```bash
npm run prepare-data
```

## 技术栈

- **前端框架**: Vue 3 (组合式 API)
- **构建工具**: Vite
- **开发工具**: Vue DevTools, HMR 热重载
- **数据格式**: JSON + 原始文本日志

## 主要组件说明

### GameViewer.vue

主要的游戏查看器组件，包含：

- 游戏列表展示
- 事件回放控制
- 玩家状态管理
- 进度条交互
- 全局概览模态框

### gameLogParser.js

游戏日志解析器，负责：

- 解析原始文本日志
- 提取游戏事件和玩家信息
- 生成结构化数据用于可视化

### trainingService.js

数据获取服务，提供：

- 从 `/.training` 获取进度数据
- 读取原始游戏日志
- 查找相关复盘文件

## 与原 Flask 版本的对比

| 功能       | Flask 版本 | Vue 版本 | 状态     |
| ---------- | ---------- | -------- | -------- |
| 游戏列表   | ✅         | ✅       | 已迁移   |
| 事件回放   | ✅         | ✅       | 已迁移   |
| 玩家状态   | ✅         | ✅       | 已迁移   |
| 进度控制   | ✅         | ✅       | 已迁移   |
| 全局概览   | ✅         | ✅       | 已迁移   |
| 键盘控制   | ✅         | ⏳       | 待实现   |
| 复盘分析   | ✅         | ⏳       | 基础版本 |
| 学习链展示 | ✅         | ⏳       | 待迁移   |

## 部署建议

1. **静态部署**: 构建后可部署到任何静态文件服务器
2. **CDN 优化**: 可配置 CDN 加速静态资源加载
3. **数据同步**: 确保 `.training` 目录数据及时更新

## 后续改进计划

1. **性能优化**: 大文件懒加载、虚拟滚动
2. **功能扩展**: 键盘快捷键、搜索过滤、数据导出
3. **分析增强**: 更详细的复盘分析、统计图表
4. **移动端**: 改进移动设备体验

---

## 开发者注意事项

- 确保 `npm run prepare-data` 在每次数据更新后运行
- 修改 `gameLogParser.js` 时注意日志格式兼容性
- 新增功能时保持与现有 API 设计的一致性
