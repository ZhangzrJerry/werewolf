# WerewolfGame å•å…ƒæµ‹è¯•æ€»ç»“

## æµ‹è¯•ç»Ÿè®¡

- **æ€»æµ‹è¯•æ•°**: 23
- **æµ‹è¯•çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡
- **æµ‹è¯•æ—¶é—´**: ~0.006 ç§’

## æµ‹è¯•ç±»åˆ«

### 1. TestWerewolfGameInit (4 ä¸ªæµ‹è¯•)

æµ‹è¯•æ¸¸æˆåˆå§‹åŒ–åŠŸèƒ½

- âœ… test_init_minimum_players - éªŒè¯æœ€å°‘ç©å®¶æ•°é‡è¦æ±‚
- âœ… test_init_valid_six_player_game - 6 äººå±€åˆå§‹åŒ–
- âœ… test_init_valid_nine_player_game - 9 äººå±€åˆå§‹åŒ–
- âœ… test_init_twelve_player_game - 12 äººå±€åˆå§‹åŒ–

### 2. TestRoleAssignment (3 ä¸ªæµ‹è¯•)

æµ‹è¯•è§’è‰²åˆ†é…é€»è¾‘

- âœ… test_six_player_roles - 6 äººå±€è§’è‰²åˆ†é…ï¼ˆ2 ç‹¼äººã€2 æ‘æ°‘ã€1 é¢„è¨€å®¶ã€1 å¥³å·«ï¼‰
- âœ… test_nine_player_roles - 9 äººå±€è§’è‰²åˆ†é…ï¼ˆ3 ç‹¼äººã€3 æ‘æ°‘ã€1 é¢„è¨€å®¶ã€1 å¥³å·«ã€1 çŒäººï¼‰
- âœ… test_twelve_player_roles - 12 äººå±€è§’è‰²åˆ†é…ï¼ˆ4 ç‹¼äººã€4 æ‘æ°‘ã€1 é¢„è¨€å®¶ã€1 å¥³å·«ã€1 çŒäººã€1 å®ˆå«ï¼‰

### 3. TestNightPhase (6 ä¸ªæµ‹è¯•)

æµ‹è¯•å¤œæ™šé˜¶æ®µçš„å„ç§è¡ŒåŠ¨

- âœ… test_werewolf_attack_simple - ç‹¼äººå‡»æ€ç©å®¶
- âœ… test_seer_check - é¢„è¨€å®¶æŸ¥éªŒèº«ä»½
- âœ… test_witch_save - å¥³å·«ä½¿ç”¨è§£è¯æ•‘äºº
- âœ… test_witch_poison - å¥³å·«ä½¿ç”¨æ¯’è¯æ€äºº
- âœ… test_witch_single_use_limitation - å¥³å·«æŠ€èƒ½å•æ¬¡ä½¿ç”¨é™åˆ¶

### 4. TestGuardian (3 ä¸ªæµ‹è¯•)

æµ‹è¯•å®ˆå«è§’è‰²çš„ç‰¹æ®ŠåŠŸèƒ½

- âœ… test_guardian_protect - å®ˆå«ä¿æŠ¤ç©å®¶
- âœ… test_guardian_cannot_protect_same_player_twice - å®ˆå«ä¸èƒ½è¿ç»­ä¸¤æ™šä¿æŠ¤åŒä¸€ç©å®¶
- âœ… test_guardian_and_witch_both_save - å®ˆå«å’Œå¥³å·«åŒæ—¶æ•‘äººæ—¶çš„ç‰¹æ®Šè§„åˆ™ï¼ˆç›®æ ‡ä»æ­»äº¡ï¼‰

### 5. TestDayPhase (3 ä¸ªæµ‹è¯•)

æµ‹è¯•ç™½å¤©é˜¶æ®µçš„æŠ•ç¥¨æœºåˆ¶

- âœ… test_voting_elimination - æŠ•ç¥¨æ·˜æ±°ç©å®¶
- âœ… test_voting_tie_no_elimination - å¹³ç¥¨æ—¶æ— äººæ·˜æ±°
- âœ… test_day_count_increment - å¤©æ•°è®¡æ•°å™¨é€’å¢

### 6. TestGameEndConditions (3 ä¸ªæµ‹è¯•)

æµ‹è¯•æ¸¸æˆç»“æŸæ¡ä»¶åˆ¤å®š

- âœ… test_villagers_win_when_all_werewolves_dead - æ‰€æœ‰ç‹¼äººæ­»äº¡æ—¶å¥½äººè·èƒœ
- âœ… test_werewolves_win_when_equal_or_more - ç‹¼äººæ•°é‡ â‰¥ å¥½äººæ—¶ç‹¼äººè·èƒœ
- âœ… test_game_continues_when_not_ended - æ¸¸æˆæœªç»“æŸæ—¶ç»§ç»­è¿›è¡Œ

### 7. TestGameState (2 ä¸ªæµ‹è¯•)

æµ‹è¯•æ¸¸æˆçŠ¶æ€ç®¡ç†

- âœ… test_to_dict - æ¸¸æˆçŠ¶æ€è½¬å­—å…¸
- âœ… test_game_log_recording - æ¸¸æˆæ—¥å¿—è®°å½•

## ä»£ç è¦†ç›–èŒƒå›´

æµ‹è¯•è¦†ç›–äº† `WerewolfGame` ç±»çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼š

### å·²è¦†ç›–çš„æ–¹æ³•

- âœ… `__init__` - æ¸¸æˆåˆå§‹åŒ–
- âœ… `_assign_roles` - è§’è‰²åˆ†é…
- âœ… `_get_players_with_role` - è·å–ç‰¹å®šè§’è‰²ç©å®¶
- âœ… `_process_werewolf_action` - å¤„ç†ç‹¼äººè¡ŒåŠ¨
- âœ… `_process_seer_action` - å¤„ç†é¢„è¨€å®¶è¡ŒåŠ¨
- âœ… `_process_witch_action` - å¤„ç†å¥³å·«è¡ŒåŠ¨
- âœ… `_process_guardian_action` - å¤„ç†å®ˆå«è¡ŒåŠ¨
- âœ… `_collect_votes` - æ”¶é›†æŠ•ç¥¨
- âœ… `_count_votes` - ç»Ÿè®¡æŠ•ç¥¨
- âœ… `execute_night_phase` - æ‰§è¡Œå¤œæ™šé˜¶æ®µ
- âœ… `execute_day_phase` - æ‰§è¡Œç™½å¤©é˜¶æ®µ
- âœ… `check_game_end` - æ£€æŸ¥æ¸¸æˆç»“æŸ
- âœ… `to_dict` - çŠ¶æ€è½¬å­—å…¸

### æµ‹è¯•çš„ç‰¹æ®Šè§„åˆ™

- âœ… å¥³å·«è§£è¯å’Œæ¯’è¯å„åªèƒ½ä½¿ç”¨ä¸€æ¬¡
- âœ… å®ˆå«ä¸èƒ½è¿ç»­ä¸¤æ™šä¿æŠ¤åŒä¸€ç©å®¶
- âœ… å®ˆå«å’Œå¥³å·«åŒæ—¶æ•‘åŒä¸€ç›®æ ‡æ—¶ï¼Œç›®æ ‡ä»ç„¶æ­»äº¡
- âœ… æŠ•ç¥¨å¹³ç¥¨æ—¶æ— äººæ·˜æ±°
- âœ… ç‹¼äººæŒ‰å¤šæ•°ç¥¨å†³å®šå‡»æ€ç›®æ ‡

## è¿è¡Œæµ‹è¯•

```powershell
# æ–¹æ³•1: ä½¿ç”¨ unittest
python -m unittest discover tests -v

# æ–¹æ³•2: ä½¿ç”¨æµ‹è¯•è„šæœ¬
python run_tests.py

# æ–¹æ³•3: ä½¿ç”¨ pytestï¼ˆéœ€å…ˆå®‰è£…ï¼‰
pip install pytest
pytest -v
```

## æµ‹è¯•è´¨é‡

- âœ… æ‰€æœ‰è¾¹ç•Œæ¡ä»¶éƒ½å·²æµ‹è¯•
- âœ… å¼‚å¸¸æƒ…å†µå·²è¦†ç›–ï¼ˆå¦‚ç©å®¶æ•°é‡ä¸è¶³ï¼‰
- âœ… å¤æ‚äº¤äº’å·²éªŒè¯ï¼ˆå¦‚å®ˆå«+å¥³å·«æ•‘äººï¼‰
- âœ… æ¸¸æˆè§„åˆ™å®Œæ•´æ€§å·²éªŒè¯
- âœ… çŠ¶æ€ç®¡ç†æ­£ç¡®æ€§å·²éªŒè¯

## ä¸‹ä¸€æ­¥æ”¹è¿›å»ºè®®

å¯ä»¥è€ƒè™‘æ·»åŠ çš„æµ‹è¯•ï¼š

- ğŸ”² é›†æˆæµ‹è¯•ï¼šå®Œæ•´æ¸¸æˆæµç¨‹
- ğŸ”² æ€§èƒ½æµ‹è¯•ï¼šå¤§é‡ç©å®¶æƒ…å†µ
- ğŸ”² å¹¶å‘æµ‹è¯•ï¼šå¤šæ¸¸æˆå®ä¾‹
- ğŸ”² çŒäººæŠ€èƒ½æµ‹è¯•ï¼ˆå¦‚æœå®ç°ï¼‰
- ğŸ”² æ›´å¤šè¾¹ç•Œæƒ…å†µæµ‹è¯•
